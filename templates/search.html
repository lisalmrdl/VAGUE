<!DOCTYPE html>
<html lang="en">
  
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>V.A.G.U.E. Search</title>
    <link rel="stylesheet" href="../static/styles/styles.css">
    <script src="../static/js/visuals.js"></script>
</head>
<body>
        <!-- Header Container -->
    <div class="header-container">
        <header>
            <a class="logo" href="{{ url_for('home') }}">V.A.G.U.E.</a>

            <form class="search-bar" method="GET" action="/results">
              <label class="mode-toggle-button">
                <input type="checkbox" name="literal" value="literal" id="literal-toggle">
                  <span id="toggle-label">LITERAL</span>
              </label>
              <input type="text" name="query" placeholder="Type something" id="user-query" maxLength="200" autofocus>
              <input type="submit" id="search-button" value="Search">
            </form>
        </header>
    </div>
    
    <div class="body-container">
        <main>
            <div class="results">
              <div class="results-header">
                {% if query is defined %}
                    <div class="results-count">{{ results|length }} results for "{{ query }}"</div>
                    <!-- <div class="extra-actions">
                        <button class="filter-button">filter</button>
                        <button class="filter-button">filter</button>
                    </div> -->
                    {% else %}
                    <h2>No query :( Type something.</h2>
                {% endif %}
                </div>

                <div class="results-body">
                    <div class="game-results">

                    {% for game in results %}
                    <div class="game-card">
                      <img src="{{ game.img }}" alt="{{ game.title }} cover" class="game-thumbnail" onerror="/static/img/placeholder.png">
                      <div class="game-info">
                        <a class="game-title" href="{{ url_for('game_details', game_id=game.id) }}">{{ game.name }} ({{ game.date }})</a>
                        <div class="game-publisher">{{ game.devs }}</div>
                        <div class="game-genres">
                          {% for genre in game.genres.split(",") %}
                          <span class="genre">{{ genre }}</span>
                          {% endfor %}
                        </div>
                      </div>
                      <div class="game-rating">{{ game.rating }}</div>
                    </div>
                    {% endfor %}
                    
                    </div>
                    <div class="metadata-view">
                      {% if results|length > 0 %}
                      <img src="/static/plots/ranking.png" alt="there should be a plot here :(">
                      <img src="/static/plots/genres_pie.png" alt="there should be a plot here :(">
                      {% else %}
                      <div class="help">
                        <p><b>HOW TO:</b></p>
                        <p>Select your preferred search method using the toggle button to the left of the search bar.</p>
                        <p><b class="accent-b">LITERAL mode</b>: Uses TF-IDF or BOOLEAN to find matches based on word frequency.</p>
                        <p>Trigger BOOLEAN search by including operators in your query:</p>
                        <table class="boolean-search-table">
                          <tbody>
                            <tr>
                              <th><code>AND</code></th>
                              <td>Results must match both search terms</td>
                            </tr>
                            <tr>
                              <th><code>OR</code></th>
                              <td>Results may match either search term</td>
                            </tr>
                            <tr>
                              <th><code>""</code></th>
                              <td>Exact phrase match</td>
                            </tr>
                            <tr>
                              <th><code>*</code></th>
                              <td>Wildcard, matches any number of characters (including zero)</td>
                            </tr>
                          </tbody>
                        </table>
                        <p><b class="accent">NEURAL mode</b>: Semantic search finds results based on meaning rather than exact words. Great for vague or descriptive queries like “fun racing games” or “summer vibes”.</p> 
                      </div>
                      {% endif %}
                    </div>
                </div>                
            </div>
        </main>
    </div>

    <footer>
        <a href="{{ url_for('about') }}">About</a>
        <a href="https://github.com/lisalmrdl/VAGUE">Github</a>
        <p>&copy; 2026 V.A.G.U.E. All rights reserved.</p>
    </footer>
</body>
</html>

